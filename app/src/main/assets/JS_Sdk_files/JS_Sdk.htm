<!DOCTYPE html>
<!-- saved from url=(0038)http://www.duanshu.com/docs/demo.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>短书 H5-SDK 文档</title>
	<meta name="keywords" content="短书">
	<meta name="description" content="更好的知识付费和教育解决方案">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="bootstrap.min.css" type="text/css">
	<link rel="stylesheet" href="page.css" type="text/css">
	<link rel="stylesheet" href="pigments.css" type="text/css">
	<link rel="stylesheet" href="demo.css" type="text/css">
	<script src="jquery-1.11.1.min.js"></script>
	<script src="jssdk.1.0.js"></script>
</head>
<body class="h5sdk-demo-body">
	<h3>短书 H5-SDK 调用测试</h3>
	<div class="platform-box">检测平台为:<script>document.write(navigator.userAgent)</script></div>
	<div style="color:red;padding:10px 0 0 20px;">调用SDK返回数据如下:<div class="result"></div></div>
	<ul class="h5sdk-demo-box clear">

		<li onclick="getUserInfo()">获取用户信息<br>getUserInfo</li>
        <li onclick="previewImage()">预览单图<br>previewImage</li>
		<li onclick="previewPic()">预览多图<br>previewPic</li>
		<li onclick="startRecord()">开始录音<br>startRecord</li>
        <li onclick="stopRecord()">停止录音<br>stopRecord</li>
        <li onclick="playVoice()">播放语音<br>playVoice</li>
        <li onclick="pauseVoice()">暂停播放<br>pauseVoice</li>
		<li onclick="stopVoice()">停止播放<br>stopVoice</li>
		<li onclick="chooseImage()">选图<br>chooseImage</li>
        <li onclick="share()">分享面板<br>share</li>
	</ul>

<script>
  var navBarIsShow = false
  var navMenuIsShow = false
	$(function(){
		$(window).on('load',function(){
  		duanshu.config({
  			debug : true
  		});
  		duanshu.registerEvents({
  			NetworkChange : function(response){
  				callback( JSON.stringify(response) );
  			},
        OnVoiceRecordEnd: function(response){
            callback( JSON.stringify(response) );
        },
        OnVoicePlayEnd: function(response){
            callback( response );
        },
        voiceTimeObserver: function(response){
            callback( response );
        }
  		});
		});
	});
    
    
function callback(data){
    $('.result').html( data );
}

function test(data){
    $('.result').html( data );
}

function getUserInfo()
{
    duanshu.getUserInfo(callback)
}

function previewImage() {
    duanshu.previewImage({
                         imgUrl:"http://img3.redocn.com/tupian/20160114/bizhenjingmeihuaduotuansucai_5760497.jpg"
                         })
                         
}

function previewPic() {
    duanshu.previewPic({"position":"1","pics":["https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1212563320,2603098771&fm=27&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=4101644246,2396800157&fm=27&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2668913707,332219796&fm=27&gp=0.jpg"]})

}

function startRecord() {
    duanshu.startRecord()
}

function stopRecord() {
    duanshu.stopRecord(function(data){
                       callback(data)
                       })
}

function playVoice() {
    duanshu.playVoice({
                      record_url : 'http://qnimg.v2.dingdone.com/clientapi/record/mp3/2017/8/20170811160239487XTVN.mp3'
                      })
}

function pauseVoice() {
    duanshu.pauseVoice()
}

function stopVoice() {
    duanshu.stopVoice()
}

function chooseImage() {
    duanshu.chooseImage({
                        count : '2'
                        },function(data){
                       test(data)
                       })
}

function share() {
    duanshu.share({"title":"这是标题","picurl":"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1254544685,441686333&fm=27&gp=0.jpg","url":"http://www.baidu.com","content":"这是内容"},callback)
}




</script>
</body>
</html>
